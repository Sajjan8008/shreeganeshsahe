import {
    Router
  } from 'express';
  import requireJwtAuth from '../../middleware/requireJwtAuth.js';
  import Sets from '../../models/Sets.js';
  import {
    verifyToken
  } from '../../helper/common.js';
  let logger = require('../../services/logger');

  const router = Router();
  
  const env = process.env;
  
  /**
   * Get the listing of sets.
   */
  router.get('/', requireJwtAuth, async (req, res) => {
  
    let authstatus = await verifyToken(req);
    if (authstatus.status == 0) {
      return res.status(403).json(authstatus);
    }
    
    try {
      const sets = await Sets.find().sort({
        orderby: 'asc'
      });
  
      res.json({
        sets: sets.map((m) => {
          return m.toJSON();
        }),
      });
    } catch (err) {
      logger.error(err.message, {metadata: err});
      res.status(500).json({
        message: 'Issue in settings API.'
      });
    }
  });
  

  
  /**
   * Create Set
   */
  router.post('/', requireJwtAuth, async (req, res) => {
  
    let authstatus = await verifyToken(req);
    if (authstatus.status == 0) {
      return res.status(403).json(authstatus);
    }
  
    try {
        let jhandaMundaNumberSets = [[1,1,1,1,1,1],[1,1,1,1,1,2],[1,1,1,1,1,3],[1,1,1,1,1,4],[1,1,1,1,1,5],[1,1,1,1,1,6],[1,1,1,1,2,2],[1,1,1,1,2,3],[1,1,1,1,2,4],[1,1,1,1,2,5],[1,1,1,1,2,6],[1,1,1,1,3,3],[1,1,1,1,3,4],[1,1,1,1,3,5],[1,1,1,1,3,6],[1,1,1,1,4,4],[1,1,1,1,4,5],[1,1,1,1,4,6],[1,1,1,1,5,5],[1,1,1,1,5,6],[1,1,1,1,6,6],[1,1,1,2,2,2],[1,1,1,2,2,3],[1,1,1,2,2,4],[1,1,1,2,2,5],[1,1,1,2,2,6],[1,1,1,2,3,3],[1,1,1,2,3,4],[1,1,1,2,3,5],[1,1,1,2,3,6],[1,1,1,2,4,4],[1,1,1,2,4,5],[1,1,1,2,4,6],[1,1,1,2,5,5],[1,1,1,2,5,6],[1,1,1,2,6,6],[1,1,1,3,3,3],[1,1,1,3,3,4],[1,1,1,3,3,5],[1,1,1,3,3,6],[1,1,1,3,4,4],[1,1,1,3,4,5],[1,1,1,3,4,6],[1,1,1,3,5,5],[1,1,1,3,5,6],[1,1,1,3,6,6],[1,1,1,4,4,4],[1,1,1,4,4,5],[1,1,1,4,4,6],[1,1,1,4,5,5],[1,1,1,4,5,6],[1,1,1,4,6,6],[1,1,1,5,5,5],[1,1,1,5,5,6],[1,1,1,5,6,6],[1,1,1,6,6,6],[1,1,2,2,2,2],[1,1,2,2,2,3],[1,1,2,2,2,4],[1,1,2,2,2,5],[1,1,2,2,2,6],[1,1,2,2,3,3],[1,1,2,2,3,4],[1,1,2,2,3,5],[1,1,2,2,3,6],[1,1,2,2,4,4],[1,1,2,2,4,5],[1,1,2,2,4,6],[1,1,2,2,5,5],[1,1,2,2,5,6],[1,1,2,2,6,6],[1,1,2,3,3,3],[1,1,2,3,3,4],[1,1,2,3,3,5],[1,1,2,3,3,6],[1,1,2,3,4,4],[1,1,2,3,4,5],[1,1,2,3,4,6],[1,1,2,3,5,5],[1,1,2,3,5,6],[1,1,2,3,6,6],[1,1,2,4,4,4],[1,1,2,4,4,5],[1,1,2,4,4,6],[1,1,2,4,5,5],[1,1,2,4,5,6],[1,1,2,4,6,6],[1,1,2,5,5,5],[1,1,2,5,5,6],[1,1,2,5,6,6],[1,1,2,6,6,6],[1,1,3,3,3,3],[1,1,3,3,3,4],[1,1,3,3,3,5],[1,1,3,3,3,6],[1,1,3,3,4,4],[1,1,3,3,4,5],[1,1,3,3,4,6],[1,1,3,3,5,5],[1,1,3,3,5,6],[1,1,3,3,6,6],[1,1,3,4,4,4],[1,1,3,4,4,5],[1,1,3,4,4,6],[1,1,3,4,5,5],[1,1,3,4,5,6],[1,1,3,4,6,6],[1,1,3,5,5,5],[1,1,3,5,5,6],[1,1,3,5,6,6],[1,1,3,6,6,6],[1,1,4,4,4,4],[1,1,4,4,4,5],[1,1,4,4,4,6],[1,1,4,4,5,5],[1,1,4,4,5,6],[1,1,4,4,6,6],[1,1,4,5,5,5],[1,1,4,5,5,6],[1,1,4,5,6,6],[1,1,4,6,6,6],[1,1,5,5,5,5],[1,1,5,5,5,6],[1,1,5,5,6,6],[1,1,5,6,6,6],[1,1,6,6,6,6],[1,2,2,2,2,2],[1,2,2,2,2,3],[1,2,2,2,2,4],[1,2,2,2,2,5],[1,2,2,2,2,6],[1,2,2,2,3,3],[1,2,2,2,3,4],[1,2,2,2,3,5],[1,2,2,2,3,6],[1,2,2,2,4,4],[1,2,2,2,4,5],[1,2,2,2,4,6],[1,2,2,2,5,5],[1,2,2,2,5,6],[1,2,2,2,6,6],[1,2,2,3,3,3],[1,2,2,3,3,4],[1,2,2,3,3,5],[1,2,2,3,3,6],[1,2,2,3,4,4],[1,2,2,3,4,5],[1,2,2,3,4,6],[1,2,2,3,5,5],[1,2,2,3,5,6],[1,2,2,3,6,6],[1,2,2,4,4,4],[1,2,2,4,4,5],[1,2,2,4,4,6],[1,2,2,4,5,5],[1,2,2,4,5,6],[1,2,2,4,6,6],[1,2,2,5,5,5],[1,2,2,5,5,6],[1,2,2,5,6,6],[1,2,2,6,6,6],[1,2,3,3,3,3],[1,2,3,3,3,4],[1,2,3,3,3,5],[1,2,3,3,3,6],[1,2,3,3,4,4],[1,2,3,3,4,5],[1,2,3,3,4,6],[1,2,3,3,5,5],[1,2,3,3,5,6],[1,2,3,3,6,6],[1,2,3,4,4,4],[1,2,3,4,4,5],[1,2,3,4,4,6],[1,2,3,4,5,5],[1,2,3,4,5,6],[1,2,3,4,6,6],[1,2,3,5,5,5],[1,2,3,5,5,6],[1,2,3,5,6,6],[1,2,3,6,6,6],[1,2,4,4,4,4],[1,2,4,4,4,5],[1,2,4,4,4,6],[1,2,4,4,5,5],[1,2,4,4,5,6],[1,2,4,4,6,6],[1,2,4,5,5,5],[1,2,4,5,5,6],[1,2,4,5,6,6],[1,2,4,6,6,6],[1,2,5,5,5,5],[1,2,5,5,5,6],[1,2,5,5,6,6],[1,2,5,6,6,6],[1,2,6,6,6,6],[1,3,3,3,3,3],[1,3,3,3,3,4],[1,3,3,3,3,5],[1,3,3,3,3,6],[1,3,3,3,4,4],[1,3,3,3,4,5],[1,3,3,3,4,6],[1,3,3,3,5,5],[1,3,3,3,5,6],[1,3,3,3,6,6],[1,3,3,4,4,4],[1,3,3,4,4,5],[1,3,3,4,4,6],[1,3,3,4,5,5],[1,3,3,4,5,6],[1,3,3,4,6,6],[1,3,3,5,5,5],[1,3,3,5,5,6],[1,3,3,5,6,6],[1,3,3,6,6,6],[1,3,4,4,4,4],[1,3,4,4,4,5],[1,3,4,4,4,6],[1,3,4,4,5,5],[1,3,4,4,5,6],[1,3,4,4,6,6],[1,3,4,5,5,5],[1,3,4,5,5,6],[1,3,4,5,6,6],[1,3,4,6,6,6],[1,3,5,5,5,5],[1,3,5,5,5,6],[1,3,5,5,6,6],[1,3,5,6,6,6],[1,3,6,6,6,6],[1,4,4,4,4,4],[1,4,4,4,4,5],[1,4,4,4,4,6],[1,4,4,4,5,5],[1,4,4,4,5,6],[1,4,4,4,6,6],[1,4,4,5,5,5],[1,4,4,5,5,6],[1,4,4,5,6,6],[1,4,4,6,6,6],[1,4,5,5,5,5],[1,4,5,5,5,6],[1,4,5,5,6,6],[1,4,5,6,6,6],[1,4,6,6,6,6],[1,5,5,5,5,5],[1,5,5,5,5,6],[1,5,5,5,6,6],[1,5,5,6,6,6],[1,5,6,6,6,6],[1,6,6,6,6,6],[2,2,2,2,2,2],[2,2,2,2,2,3],[2,2,2,2,2,4],[2,2,2,2,2,5],[2,2,2,2,2,6],[2,2,2,2,3,3],[2,2,2,2,3,4],[2,2,2,2,3,5],[2,2,2,2,3,6],[2,2,2,2,4,4],[2,2,2,2,4,5],[2,2,2,2,4,6],[2,2,2,2,5,5],[2,2,2,2,5,6],[2,2,2,2,6,6],[2,2,2,3,3,3],[2,2,2,3,3,4],[2,2,2,3,3,5],[2,2,2,3,3,6],[2,2,2,3,4,4],[2,2,2,3,4,5],[2,2,2,3,4,6],[2,2,2,3,5,5],[2,2,2,3,5,6],[2,2,2,3,6,6],[2,2,2,4,4,4],[2,2,2,4,4,5],[2,2,2,4,4,6],[2,2,2,4,5,5],[2,2,2,4,5,6],[2,2,2,4,6,6],[2,2,2,5,5,5],[2,2,2,5,5,6],[2,2,2,5,6,6],[2,2,2,6,6,6],[2,2,3,3,3,3],[2,2,3,3,3,4],[2,2,3,3,3,5],[2,2,3,3,3,6],[2,2,3,3,4,4],[2,2,3,3,4,5],[2,2,3,3,4,6],[2,2,3,3,5,5],[2,2,3,3,5,6],[2,2,3,3,6,6],[2,2,3,4,4,4],[2,2,3,4,4,5],[2,2,3,4,4,6],[2,2,3,4,5,5],[2,2,3,4,5,6],[2,2,3,4,6,6],[2,2,3,5,5,5],[2,2,3,5,5,6],[2,2,3,5,6,6],[2,2,3,6,6,6],[2,2,4,4,4,4],[2,2,4,4,4,5],[2,2,4,4,4,6],[2,2,4,4,5,5],[2,2,4,4,5,6],[2,2,4,4,6,6],[2,2,4,5,5,5],[2,2,4,5,5,6],[2,2,4,5,6,6],[2,2,4,6,6,6],[2,2,5,5,5,5],[2,2,5,5,5,6],[2,2,5,5,6,6],[2,2,5,6,6,6],[2,2,6,6,6,6],[2,3,3,3,3,3],[2,3,3,3,3,4],[2,3,3,3,3,5],[2,3,3,3,3,6],[2,3,3,3,4,4],[2,3,3,3,4,5],[2,3,3,3,4,6],[2,3,3,3,5,5],[2,3,3,3,5,6],[2,3,3,3,6,6],[2,3,3,4,4,4],[2,3,3,4,4,5],[2,3,3,4,4,6],[2,3,3,4,5,5],[2,3,3,4,5,6],[2,3,3,4,6,6],[2,3,3,5,5,5],[2,3,3,5,5,6],[2,3,3,5,6,6],[2,3,3,6,6,6],[2,3,4,4,4,4],[2,3,4,4,4,5],[2,3,4,4,4,6],[2,3,4,4,5,5],[2,3,4,4,5,6],[2,3,4,4,6,6],[2,3,4,5,5,5],[2,3,4,5,5,6],[2,3,4,5,6,6],[2,3,4,6,6,6],[2,3,5,5,5,5],[2,3,5,5,5,6],[2,3,5,5,6,6],[2,3,5,6,6,6],[2,3,6,6,6,6],[2,4,4,4,4,4],[2,4,4,4,4,5],[2,4,4,4,4,6],[2,4,4,4,5,5],[2,4,4,4,5,6],[2,4,4,4,6,6],[2,4,4,5,5,5],[2,4,4,5,5,6],[2,4,4,5,6,6],[2,4,4,6,6,6],[2,4,5,5,5,5],[2,4,5,5,5,6],[2,4,5,5,6,6],[2,4,5,6,6,6],[2,4,6,6,6,6],[2,5,5,5,5,5],[2,5,5,5,5,6],[2,5,5,5,6,6],[2,5,5,6,6,6],[2,5,6,6,6,6],[2,6,6,6,6,6],[3,3,3,3,3,3],[3,3,3,3,3,4],[3,3,3,3,3,5],[3,3,3,3,3,6],[3,3,3,3,4,4],[3,3,3,3,4,5],[3,3,3,3,4,6],[3,3,3,3,5,5],[3,3,3,3,5,6],[3,3,3,3,6,6],[3,3,3,4,4,4],[3,3,3,4,4,5],[3,3,3,4,4,6],[3,3,3,4,5,5],[3,3,3,4,5,6],[3,3,3,4,6,6],[3,3,3,5,5,5],[3,3,3,5,5,6],[3,3,3,5,6,6],[3,3,3,6,6,6],[3,3,4,4,4,4],[3,3,4,4,4,5],[3,3,4,4,4,6],[3,3,4,4,5,5],[3,3,4,4,5,6],[3,3,4,4,6,6],[3,3,4,5,5,5],[3,3,4,5,5,6],[3,3,4,5,6,6],[3,3,4,6,6,6],[3,3,5,5,5,5],[3,3,5,5,5,6],[3,3,5,5,6,6],[3,3,5,6,6,6],[3,3,6,6,6,6],[3,4,4,4,4,4],[3,4,4,4,4,5],[3,4,4,4,4,6],[3,4,4,4,5,5],[3,4,4,4,5,6],[3,4,4,4,6,6],[3,4,4,5,5,5],[3,4,4,5,5,6],[3,4,4,5,6,6],[3,4,4,6,6,6],[3,4,5,5,5,5],[3,4,5,5,5,6],[3,4,5,5,6,6],[3,4,5,6,6,6],[3,4,6,6,6,6],[3,5,5,5,5,5],[3,5,5,5,5,6],[3,5,5,5,6,6],[3,5,5,6,6,6],[3,5,6,6,6,6],[3,6,6,6,6,6],[4,4,4,4,4,4],[4,4,4,4,4,5],[4,4,4,4,4,6],[4,4,4,4,5,5],[4,4,4,4,5,6],[4,4,4,4,6,6],[4,4,4,5,5,5],[4,4,4,5,5,6],[4,4,4,5,6,6],[4,4,4,6,6,6],[4,4,5,5,5,5],[4,4,5,5,5,6],[4,4,5,5,6,6],[4,4,5,6,6,6],[4,4,6,6,6,6],[4,5,5,5,5,5],[4,5,5,5,5,6],[4,5,5,5,6,6],[4,5,5,6,6,6],[4,5,6,6,6,6],[4,6,6,6,6,6],[5,5,5,5,5,5],[5,5,5,5,5,6],[5,5,5,5,6,6],[5,5,5,6,6,6],[5,5,6,6,6,6],[5,6,6,6,6,6],[6,6,6,6,6,6]]
        let insertMultiple = [];
        for ( let element of jhandaMundaNumberSets) {
            insertMultiple.push({numberSet : element, winning : 0 })
        }

        let set = await Sets.insertMany(insertMultiple).exec();

      res.status(200).json('done');
  
    } catch (err) {
      logger.error(err.message, {metadata: err});
      res.status(500).json({
        message: 'Issue in create.'
      });
    }
  });
  
  export default router;